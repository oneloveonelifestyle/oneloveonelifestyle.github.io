<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Search Results | One Love One Lifestyle</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --black:#000;
  --dark:#111;
  --gray:#f4f4f4;
  --soft:#eaeaea;
  --accent:#f3b23a;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--gray);
  overflow-x:hidden;
}

/* HEADER */
header{ background:#000; color:#fff; }
.top-header{ display:flex; align-items:center; gap:12px; padding:12px; }
.brand{ display:flex; align-items:center; gap:8px; }
.brand img{ width:40px; border-radius:50%; }
.brand span{ font-weight:bold; font-size:14px; }

.search-wrap{
  flex:1; display:flex; max-width:520px;
  background:#fff; border-radius:6px; overflow:hidden;
}
.search-wrap input{ flex:1; border:none; padding:10px; }
.search-wrap button{ border:none; background:var(--accent); padding:0 14px; }

/* NAV */
.navbar{
  display:flex; gap:16px; padding:10px 14px;
  background:#1b1b1b; overflow-x:auto;
}
.navbar a{ color:#fff; text-decoration:none; white-space:nowrap; }

/* SEARCH RESULTS */
.section-title{
  font-size:18px;
  font-weight:bold;
  margin:20px 20px 10px;
}

.products-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  padding:0 12px 30px;
}

.product-card{
  background:#fff;
  border-radius:14px;
  padding:12px;
  box-shadow:0 6px 16px rgba(0,0,0,.08);
  cursor:pointer;
}

.slider{
  display:flex;
  overflow-x:auto;
}

.slider img{
  width:100%;
  display:block;
  border-radius:10px;
}

.details h3{
  font-size:13px;
  margin:8px 0 4px;
}

.price{
  font-weight:bold;
  font-size:13px;
}

.no-results{
  padding:40px 20px;
  text-align:center;
  color:#444;
}
</style>
</head>

<body>

<!-- ‚úÖ SAME HEADER AS HOME PAGE -->
<header>
  <div class="top-header">
    <div class="brand">
      <img src="logo.jpg">
      <span>One Love One Lifestyle</span>
    </div>
    <div class="search-wrap">
      <input placeholder="Search products">
      <button onclick="handleSearch()">üîç</button>
    </div>
  </div>

  <div class="navbar">
    <a href="clothing.html">Clothing</a>
    <a href="shoes.html">Shoes</a>
    <a href="accessories.html">Accessories</a>
    <a href="#">Gifts</a>
    <a href="vault.html">Vault</a>
  </div>
</header>

<!-- ‚úÖ SEARCH RESULTS START -->
<div id="content"></div>

<script src="products.js"></script>

<script>
function handleSearch(){
  const input = document.querySelector(".search-wrap input");
  const q = input.value.trim();
  if(!q) return;
  window.location.href = "search.html?q=" + encodeURIComponent(q);
}

document.querySelector(".search-wrap input").addEventListener("keydown", function(e){
  if(e.key === "Enter"){
    e.preventDefault();
    handleSearch();
  }
});

const params = new URLSearchParams(window.location.search);
const rawKeyword = (params.get("q") || "").toLowerCase().trim();

const keyword = rawKeyword.endsWith("es")
  ? rawKeyword.slice(0, -2)
  : rawKeyword.endsWith("s")
    ? rawKeyword.slice(0, -1)
    : rawKeyword;

const container = document.getElementById("content");
function scoreProduct(p){
  let score = 0;
  const title = p.title.toLowerCase();
  const search = (p.search || "").toLowerCase();
  const category = (p.category || "").toLowerCase();

  if(title === keyword || title === rawKeyword) score += 100;
  if(title.includes(keyword) || title.includes(rawKeyword)) score += 60;
  if(search.includes(keyword) || search.includes(rawKeyword)) score += 30;
  if(category === keyword || category === rawKeyword) score += 50;

  return score;
}

function renderProducts(list){
  const grid = document.createElement("div");
  grid.className = "products-grid";

  list.forEach(p=>{
    const card = document.createElement("div");
    card.className = "product-card";

    card.innerHTML = `
      <div class="slider">
        ${p.images.map(img=>`<img src="${img}">`).join("")}
      </div>
      <div class="details">
        <h3>${p.title}</h3>
        <div class="price">${p.price}</div>
      </div>
    `;

    card.onclick = ()=>{
      localStorage.setItem("openProduct", p.id);
      if(p.category === "clothing") location.href="clothing.html";
      else if(p.category === "shoe") location.href="shoes.html";
      else location.href="accessories.html";
    };

    grid.appendChild(card);
  });

  container.appendChild(grid);
}

if(!keyword){
  container.innerHTML = `<div class="no-results"><h2>Please enter a search term</h2></div>`;
}else{
  const ranked = PRODUCTS
    .map(p=>({ product:p, score:scoreProduct(p) }))
    .sort((a,b)=>b.score - a.score);

  const matches = ranked.filter(r=>r.score > 0).map(r=>r.product);
  const suggestions = ranked.filter(r=>r.score === 0).map(r=>r.product);

  if(matches.length === 0){
    container.innerHTML = `
      <div class="no-results">
        <h2>No results for "${keyword}"</h2>
        <p>Try different keywords or explore suggestions below.</p>
      </div>
    `;
    renderProducts(suggestions);
  }else{
    const title = document.createElement("div");
    title.className = "section-title";
    title.textContent = `Results for "${keyword}"`;
    container.appendChild(title);

    renderProducts(matches);

    if(suggestions.length){
      const sug = document.createElement("div");
      sug.className = "section-title";
      sug.textContent = "You might also like";
      container.appendChild(sug);

      renderProducts(suggestions);
    }
  }
}
</script>

</body>
</html>
