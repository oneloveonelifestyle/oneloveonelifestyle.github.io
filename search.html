<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Search Results | One Love One Lifestyle</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f4f4;
}
header{
  background:#000;
  color:#fff;
  padding:15px;
  text-align:center;
  font-weight:bold;
}
.container{ padding:20px; }
.message{
  background:#fff;
  padding:20px;
  border-radius:12px;
  margin-bottom:20px;
  font-size:14px;
}
.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:15px;
}
.card{
  background:#fff;
  padding:12px;
  border-radius:14px;
  box-shadow:0 6px 16px rgba(0,0,0,.08);
  text-align:center;
}
.card img{
  width:100%;
  height:140px;
  object-fit:cover;
  border-radius:10px;
}
.card h4{ font-size:14px; margin:8px 0 4px; }
.card p{ font-size:13px; font-weight:bold; }

@media(min-width:768px){
  .grid{ grid-template-columns:repeat(4,1fr); }
}
</style>
</head>

<body>

<header>Search Results</header>

<div class="container">
  <div id="status"></div>
  <div id="results" class="grid"></div>
</div>

<!-- LOAD YOUR EXISTING FILE -->
<script src="products.js"></script>

<script>
/* ðŸ”’ SAFE GUARDS */
try{

  const params = new URLSearchParams(window.location.search);
  const query = (params.get("q") || "").toLowerCase();

  /* ðŸ” AUTO-DETECT PRODUCT ARRAY */
  const data =
    window.products ||
    window.allProducts ||
    window.productList ||
    [];

  if(!Array.isArray(data)){
    throw "Product data not found";
  }

  const matches = data.filter(p =>
    JSON.stringify(p).toLowerCase().includes(query)
  );

  const status = document.getElementById("status");
  const results = document.getElementById("results");

  function render(list){
    results.innerHTML = "";
    list.forEach(p=>{
      results.innerHTML += `
        <div class="card">
          <img src="${p.image || p.img || 'placeholder.jpg'}">
          <h4>${p.name || p.title || 'Product'}</h4>
          <p>â‚¹${p.price || ''}</p>
        </div>
      `;
    });
  }

  if(matches.length){
    status.innerHTML = `<div class="message">
      Showing results for "<b>${query}</b>"
    </div>`;
    render(matches);
  }else{
    status.innerHTML = `<div class="message">
      <b>No results found for "${query}"</b><br><br>
      Explore our popular products below.
    </div>`;
    render(data.slice(0,6));
  }

}catch(e){
  document.body.innerHTML = `
    <div style="padding:30px;font-family:Arial">
      <b>Search temporarily unavailable.</b><br>
      Please try again later.
    </div>
  `;
}
</script>

</body>
</html>
