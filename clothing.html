<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Clothing</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f5f5f5;
}

header {
  position: sticky;
  top: 0;
  background: black;
  color: white;
  padding: 15px;
  text-align: center;
  font-size: 22px;
}

#vaultIcon {
  position: fixed;
  top: 15px;
  right: 15px;
  font-size: 26px;
  cursor: pointer;
  z-index: 1000;
}

#vaultCount {
  position: absolute;
  top: -6px;
  right: -6px;
  background: red;
  color: white;
  font-size: 12px;
  padding: 2px 6px;
  border-radius: 50%;
}

.search-box {
  padding: 15px;
}

.search-box input {
  width: 100%;
  padding: 12px;
  font-size: 16px;
}

.products {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  padding: 15px;
}

.card {
  background: white;
  border-radius: 12px;
  padding: 10px;
  cursor: pointer;
  text-align: center;
}

.card img {
  width: 100%;
  height: 160px;
  object-fit: cover;
  border-radius: 10px;
}

.big-card {
  grid-column: span 2;
}

.vault-btn {
  margin-top: 8px;
  padding: 6px;
  border: none;
  border-radius: 8px;
  background: black;
  color: white;
  cursor: pointer;
}

#vaultModal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  z-index: 2000;
}

#vaultContent {
  background: white;
  margin: 10% auto;
  padding: 15px;
  width: 90%;
  max-width: 400px;
  border-radius: 12px;
}
</style>
</head>

<body>

<header>Clothing</header>

<div id="vaultIcon" onclick="openVault()">
  üîê
  <div id="vaultCount">0</div>
</div>

<div class="search-box">
  <input type="text" placeholder="Search shirts, jackets..." oninput="searchProducts(this.value)">
</div>

<div class="products" id="productList"></div>

<!-- VAULT MODAL -->
<div id="vaultModal" onclick="closeVault(event)">
  <div id="vaultContent">
    <h3>Vault</h3>
    <div id="vaultItems"></div>
  </div>
</div>

<script>
const products = [
  {id:1, name:"Black Jacket", category:"jacket", img:"images/jacket1.jpg"},
  {id:2, name:"Brown Jacket", category:"jacket", img:"images/jacket2.jpg"},
  {id:3, name:"White Shirt", category:"shirt", img:"images/shirt1.jpg"}
];

let selectedCategory = null;

function renderProducts(list) {
  const container = document.getElementById("productList");
  container.innerHTML = "";

  list.forEach(p => {
    const div = document.createElement("div");
    div.className = "card";
    div.onclick = () => expandProduct(p);

    div.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <h4>${p.name}</h4>
      <button class="vault-btn" onclick="saveVault(event, ${p.id})">Save to Vault</button>
    `;
    container.appendChild(div);
  });
}

function expandProduct(product) {
  selectedCategory = product.category;

  let same = products.filter(p => p.category === selectedCategory && p.id !== product.id);
  let others = products.filter(p => p.category !== selectedCategory);

  const ordered = [product, ...same, ...others];

  const container = document.getElementById("productList");
  container.innerHTML = "";

  ordered.forEach((p, i) => {
    const div = document.createElement("div");
    div.className = "card" + (i === 0 ? " big-card" : "");
    div.innerHTML = `
      <img src="${p.img}">
      <h4>${p.name}</h4>
      <button class="vault-btn" onclick="saveVault(event, ${p.id})">Save to Vault</button>
    `;
    container.appendChild(div);
  });
}

function searchProducts(text) {
  const filtered = products.filter(p =>
    p.name.toLowerCase().includes(text.toLowerCase())
  );
  renderProducts(filtered);
}

function saveVault(e, id) {
  e.stopPropagation();
  let vault = JSON.parse(localStorage.getItem("vault")) || [];
  if (!vault.includes(id)) vault.push(id);
  localStorage.setItem("vault", JSON.stringify(vault));
  updateVaultCount();
}

function updateVaultCount() {
  let vault = JSON.parse(localStorage.getItem("vault")) || [];
  document.getElementById("vaultCount").innerText = vault.length;
}

function openVault() {
  const vault = JSON.parse(localStorage.getItem("vault")) || [];
  const box = document.getElementById("vaultItems");
  box.innerHTML = "";

  vault.forEach(id => {
    const p = products.find(x => x.id === id);
    box.innerHTML += `<p>${p.name}</p>`;
  });

  document.getElementById("vaultModal").style.display = "block";
}

function closeVault(e) {
  if (e.target.id === "vaultModal") {
    document.getElementById("vaultModal").style.display = "none";
  }
}

updateVaultCount();
renderProducts(products);
</script>

</body>
</html>
