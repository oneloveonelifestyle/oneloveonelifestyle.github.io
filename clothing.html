<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OneLoveOneLifestyle</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #fafafa;
}

/* HEADER */
header {
  position: sticky;
  top: 0;
  z-index: 1000;
  background: white;
  padding: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

header input {
  flex: 1;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

.vault-btn {
  font-size: 22px;
  cursor: pointer;
  position: relative;
}

.vault-count {
  position: absolute;
  top: -6px;
  right: -8px;
  background: black;
  color: white;
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 50%;
}

/* GRID */
.grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  padding: 12px;
}

.card {
  background: white;
  border-radius: 10px;
  overflow: hidden;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

.card img {
  width: 100%;
  height: 230px;
  object-fit: cover;
}

.card .info {
  padding: 8px;
}

.card .title {
  font-weight: bold;
  font-size: 14px;
}

.card .price {
  color: #111;
  font-weight: bold;
}

/* EXPANDED */
.expanded {
  grid-column: span 2;
}

.expanded img {
  height: 350px;
}

.details {
  font-size: 14px;
  padding-top: 10px;
}

/* VAULT MODAL */
.vault-modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  z-index: 2000;
}

.vault-box {
  background: white;
  margin: 60px auto;
  width: 95%;
  max-width: 500px;
  border-radius: 12px;
  padding: 15px;
}

.vault-box h3 {
  margin: 0 0 10px;
}
</style>
</head>

<body>

<header>
  <input type="text" id="search" placeholder="Search products">
  <div class="vault-btn" onclick="openVault()">
    üîê
    <span class="vault-count" id="vaultCount">0</span>
  </div>
</header>

<div class="grid" id="productGrid"></div>

<!-- VAULT -->
<div class="vault-modal" id="vaultModal">
  <div class="vault-box">
    <h3>Your Vault</h3>
    <div id="vaultItems"></div>
    <br>
    <button onclick="closeVault()">Close</button>
  </div>
</div>

<script>
const products = [
  {
    id: 1,
    category: "jacket",
    title: "Campus Sutra Zip-Front Bomber Jacket",
    price: "‚Çπ1999",
    img: "jacket1.jpg",
    details: `
Size : S, M, L, XL<br>
Fit: Regular Fit<br>
Care Instruction: Machine Wash
`
  },
  {
    id: 2,
    category: "jacket",
    title: "Nuon Brown Text Design Cotton Jacket",
    price: "‚Çπ2199",
    img: "jacket2.jpg",
    details: `
Size : XS, S, M, L, XL<br>
Fit: Relaxed Fit<br>
Care: Machine Wash<br>
Fabric: 100% Cotton<br><br>
Manufactured by Trent Limited, Mumbai<br>
Country of Origin: India
`
  },
  {
    id: 3,
    category: "shirt",
    title: "Men Slim Fit Shirt",
    price: "‚Çπ999",
    img: "shirt1.jpg",
    details: `
Size : S, M, L, XL<br>
Fit: Slim Fit<br>
Care: Machine Wash
`
  }
];

let expandedId = null;

function render(list) {
  const grid = document.getElementById("productGrid");
  grid.innerHTML = "";

  list.forEach(p => {
    const card = document.createElement("div");
    card.className = "card" + (expandedId === p.id ? " expanded" : "");
    card.onclick = () => expandProduct(p.id);

    card.innerHTML = `
      <img src="${p.img}">
      <div class="info">
        <div class="title">${p.title}</div>
        <div class="price">${p.price}</div>
        ${expandedId === p.id ? `
          <div class="details">${p.details}</div>
          <button onclick="event.stopPropagation(); saveVault(${p.id})">
            Save to Vault
          </button>
        ` : ""}
      </div>
    `;
    grid.appendChild(card);
  });
}

function expandProduct(id) {
  expandedId = id;
  const selected = products.find(p => p.id === id);

  const same = products.filter(p => p.category === selected.category && p.id !== id);
  const others = products.filter(p => p.category !== selected.category);

  render([selected, ...same, ...others]);
}

document.getElementById("search").oninput = e => {
  const q = e.target.value.toLowerCase();
  const filtered = products.filter(p => p.title.toLowerCase().includes(q));
  expandedId = null;
  render(filtered);
};

/* VAULT */
function getVault() {
  return JSON.parse(localStorage.getItem("vault") || "[]");
}

function saveVault(id) {
  let vault = getVault();
  if (!vault.includes(id)) vault.push(id);
  localStorage.setItem("vault", JSON.stringify(vault));
  updateVaultCount();
}

function updateVaultCount() {
  document.getElementById("vaultCount").innerText = getVault().length;
}

function openVault() {
  const box = document.getElementById("vaultItems");
  box.innerHTML = "";
  getVault().forEach(id => {
    const p = products.find(x => x.id === id);
    box.innerHTML += `<p>${p.title} ‚Äì ${p.price}</p>`;
  });
  document.getElementById("vaultModal").style.display = "block";
}

function closeVault() {
  document.getElementById("vaultModal").style.display = "none";
}

updateVaultCount();
render(products);
</script>

</body>
</html>
